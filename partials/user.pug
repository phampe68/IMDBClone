html
    head
        link(href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BmbxuPwQa2lc/FVzBcNJ7UAyJxM6wuqIj61tLrc4wSX0szH/Ev+nYRRuWlolflfl" crossorigin="anonymous")
        script(src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta2/dist/js/bootstrap.bundle.min.js" integrity="sha384-b5kHyXgcpbZJO/tY9Ul7kGkf1S0CWuKcCD38l8YkeH8z8QjE0GmW1gYU5S9FOnJ0" crossorigin="anonymous")
        link(rel='stylesheet' href='https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css')
    style
        include ../stylesheets/index.css
        include ../stylesheets/user.css


    title User Page
    body
        include ./navbar.pug

        div.container.mt-5
            h1.mb-5 #{user.username}

            div(id="logout")
                form(action="/logout", method='GET')
                    button.btn.btn-primary.mt-2.ms-3(type="submit") Logout

            div(id="AccountTypeDiv")
                form(action=`/accountType/${user._id}` method="POST") Account Type:
                    div.form-check.ms-4
                        input.form-check-input(type="radio" name="accountTypeRadio" value="true" id="radContributor" checked=user.contributor)
                        label.form-check-label(for="radContributor") Contributor
                    div.form-check.ms-4
                        input.form-check-input(type="radio" name="accountTypeRadio" value="false" id="radRegular" checked=!user.contributor)
                        label.form-check-label(for="radRegular") Regular
                    button.btn.btn-primary.mt-2.ms-3(type="submit") Save


            div.mt-5(id="PersonFollowDiv")
                p People Following:
                ul.list-group
                    each person in peopleFollowing
                        li.list-group-item
                            form(action=`/unfollowPerson/${person._id}`, method='POST')
                                button.btn.btn-danger.me-3(name="from" value="profile" type="submit") Unfollow
                                a(href=`/people/${person._id}`) #{person.name}

            div.mt-5(id="UsersFollowingDiv")
                p Users Following:
                ul.list-group
                    each user in usersFollowing
                        li.list-group-item
                            form(action=`/unfollowUser/${user._id}`, method='POST')
                                button.btn.btn-danger.mt-2.ms-3(name="from" value="profile" type="submit") Unfollow
                                a(href=`/users/${user._id}`) #{user.username}

            div.mt-5(id="MoviesWatchedDiv")
                p Movies you've watched:
                ul.list-group
                    each movie in moviesWatched
                        li.list-group-item
                            button.btn.btn-danger.me-3 Remove
                            a(href=`/movies/${movie._id}`) #{movie.Title}

            div.mt-5(id="RecommendedDiv")
                p Recommended Movies:
                ul.list-group
                    each movie in recommendedMovies
                        li.list-group-item
                            a(href=`/movies/${movie._id}`) #{movie.Title}

            div.mt-5.mb-5(id="NotificationsDiv")
                p Notifications:
                ul.list-group
                    each notif in notifications
                        li.list-group-item
                            button.btn.btn-danger.me-2 Delete
                            a.btn.btn-info.me-2(href=`/${notif.type}s/${notif.relatedID}`) View
                            p.ms-2(style={display: "inline-block"}) #{notif.text}
